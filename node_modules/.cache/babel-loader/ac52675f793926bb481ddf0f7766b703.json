{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { append, createElement, extend, EventHandler, prepend, Animation, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\n\nvar VerticalEvent =\n/** @class */\nfunction (_super) {\n  __extends(VerticalEvent, _super);\n  /**\n   * Constructor for vertical view\n   */\n\n\n  function VerticalEvent(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.dateRender = [];\n    _this.renderedEvents = [];\n    _this.renderedAllDayEvents = [];\n    _this.overlapEvents = [];\n    _this.moreEvents = [];\n    _this.overlapList = [];\n    _this.allDayEvents = [];\n    _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n    _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n    _this.allDayLevel = 0;\n    _this.startHour = _this.parent.activeView.getStartHour();\n    _this.endHour = _this.parent.activeView.getEndHour();\n    _this.element = _this.parent.activeView.getPanel();\n    _this.fields = _this.parent.eventFields;\n    _this.animation = new Animation({\n      progress: _this.animationUiUpdate.bind(_this)\n    });\n\n    _this.addEventListener();\n\n    return _this;\n  }\n\n  VerticalEvent.prototype.renderAppointments = function () {\n    var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n    wrapperElements.forEach(function (element) {\n      return remove(element);\n    });\n\n    if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n      return;\n    }\n\n    this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n    this.setAllDayRowHeight(0);\n\n    if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n      return;\n    }\n\n    var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n    EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n    EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n    this.renderedEvents = [];\n    this.renderedAllDayEvents = [];\n    this.initializeValues();\n    this.processBlockEvents();\n    this.renderEvents('normalEvents');\n\n    if (this.allDayEvents.length > 0) {\n      this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n        return index === arr.map(function (item) {\n          return item.Guid;\n        }).indexOf(item.Guid);\n      });\n      removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n      this.slots.push(this.parent.activeView.renderDates.map(function (date) {\n        return +date;\n      }));\n      this.renderEvents('allDayEvents');\n    }\n\n    this.parent.notify(events.contentReady, {});\n    addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n  };\n\n  VerticalEvent.prototype.initializeValues = function () {\n    var _this = this;\n\n    this.resources = this.parent.activeViewOptions.group.resources.length > 0 ? this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel : [];\n    this.cellHeight = parseFloat(this.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n    this.dateRender[0] = this.parent.activeView.renderDates;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.resources.forEach(function (resource, index) {\n        return _this.dateRender[index] = resource.renderDates;\n      });\n    }\n  };\n\n  VerticalEvent.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n    var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n    var isSameRange = schedule.startHour.getTime() <= start.getTime() && eventObj[this.fields.startTime].getTime() >= schedule.startHour.getTime() && eventObj[this.fields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n    return isHourRange || isSameRange;\n  };\n\n  VerticalEvent.prototype.getHeight = function (start, end) {\n    var appHeight = (end.getTime() - start.getTime()) / (60 * 1000) * (this.cellHeight * this.slotCount) / this.interval;\n    appHeight = appHeight <= 0 ? this.cellHeight : appHeight;\n    return appHeight;\n  };\n\n  VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n    var appointmentWrap = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n\n    if (this.parent.enableRtl) {\n      setStyleAttribute(appointmentElement, {\n        'right': appLeft\n      });\n    } else {\n      setStyleAttribute(appointmentElement, {\n        'left': appLeft\n      });\n    }\n\n    var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n    var args = {\n      data: eventObj,\n      element: appointmentElement,\n      cancel: false,\n      type: eventType\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        appointmentWrap[index].appendChild(appointmentElement);\n      }\n    });\n  };\n\n  VerticalEvent.prototype.processBlockEvents = function () {\n    var resources = this.getResourceList();\n    var dateCount = 0;\n\n    for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n      var resource = resources_1[_i];\n      var renderDates = this.dateRender[resource];\n\n      for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n        var startDate = new Date(renderDates[day].getTime());\n        var endDate = util.addDays(renderDates[day], 1);\n        var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[resource]);\n\n        for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n          var event_1 = filterEvents_1[_a];\n\n          if (this.parent.resourceBase) {\n            this.setValues(event_1, resource);\n          }\n\n          this.renderBlockEvents(event_1, day, resource, dateCount);\n          this.cssClass = null;\n          this.groupOrder = null;\n        }\n\n        dateCount += 1;\n      }\n    }\n  };\n\n  VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n    var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n    var eStart = spannedData[this.fields.startTime];\n    var eEnd = spannedData[this.fields.endTime];\n    var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n    var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n\n    if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule)) {\n      var blockTop = void 0;\n      var blockHeight = void 0;\n\n      if (spannedData[this.fields.isAllDay]) {\n        var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n        blockHeight = formatUnit(contentWrap.offsetHeight);\n        blockTop = formatUnit(0);\n      } else {\n        blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n        blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n      }\n\n      var appointmentElement = this.createBlockAppointmentElement(eventObj, resource);\n      setStyleAttribute(appointmentElement, {\n        'width': '100%',\n        'height': blockHeight,\n        'top': blockTop\n      });\n      var index = this.parent.activeViewOptions.group.byDate ? this.resources.length * dayIndex + resource : dayCount;\n      this.appendEvent(eventObj, appointmentElement, index, '0px');\n    }\n  };\n\n  VerticalEvent.prototype.renderEvents = function (eventType) {\n    removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n    var eventCollection = eventType === 'allDayEvents' ? this.sortByDateTime(this.allDayEvents) : undefined;\n    var resources = this.getResourceList();\n    var dateCount = 0;\n\n    for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n      var resource = resources_2[_i];\n      this.slots = [];\n      var renderDates = this.dateRender[resource];\n      var renderedDate = this.getRenderedDates(renderDates) || renderDates;\n      this.slots.push(renderDates.map(function (date) {\n        return +date;\n      }));\n\n      for (var day = 0, length_2 = renderDates.length; day < length_2 && renderDates[day] <= renderedDate[renderedDate.length - 1]; day++) {\n        this.renderedEvents = [];\n        var startDate = new Date(renderDates[day].getTime());\n        var endDate = util.addDays(renderDates[day], 1);\n        var filterEvents = this.filterEvents(startDate, endDate, eventCollection, this.resources[resource]);\n\n        for (var _a = 0, filterEvents_2 = filterEvents; _a < filterEvents_2.length; _a++) {\n          var event_2 = filterEvents_2[_a];\n\n          if (this.parent.resourceBase) {\n            this.setValues(event_2, resource);\n          }\n\n          if (eventType === 'allDayEvents') {\n            this.renderAllDayEvents(event_2, day, resource, dateCount);\n          } else {\n            if (this.isAllDayAppointment(event_2)) {\n              this.allDayEvents.push(extend({}, event_2, null, true));\n            } else {\n              this.renderNormalEvents(event_2, day, resource, dateCount);\n            }\n          }\n\n          this.cssClass = null;\n          this.groupOrder = null;\n        }\n\n        dateCount += 1;\n      }\n    }\n  };\n\n  VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.cssClass = this.resources[resourceIndex].cssClass;\n      this.groupOrder = this.resources[resourceIndex].groupOrder;\n    } else {\n      this.cssClass = this.parent.resourceBase.getCssClass(event);\n    }\n  };\n\n  VerticalEvent.prototype.getResourceList = function () {\n    var resources = Array.apply(null, {\n      length: this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive ? this.resources.length : 1\n    }).map(function (value, index) {\n      return index;\n    });\n    return resources;\n  };\n\n  VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n    var fieldMapping = this.parent.eventFields;\n    var recordSubject = record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default;\n    var appointmentWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[fieldMapping.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-selected': 'false',\n        'aria-grabbed': 'true'\n      }\n    });\n\n    if (record[this.fields.isReadonly]) {\n      addClass([appointmentWrapper], 'e-read-only');\n    }\n\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    appointmentWrapper.appendChild(appointmentDetails);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n      appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n    }\n\n    var templateElement;\n    var eventData = data;\n\n    if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n      var elementId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.eventTemplateName;\n      var templateId = elementId + viewName + 'eventTemplate';\n      var templateArgs = util.addLocalOffsetToEvent(record, this.parent.eventFields);\n      templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\n    } else {\n      var appointmentSubject = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: recordSubject\n      });\n\n      if (isAllDay) {\n        if (record[fieldMapping.isAllDay]) {\n          templateElement = [appointmentSubject];\n        } else {\n          templateElement = [];\n          var appointmentStartTime = createElement('div', {\n            className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n            innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n          });\n          var appointmentEndTime = createElement('div', {\n            className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n            innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n          });\n          addClass([appointmentSubject], 'e-text-center');\n\n          if (!eventData.isLeft) {\n            templateElement.push(appointmentStartTime);\n          }\n\n          templateElement.push(appointmentSubject);\n\n          if (!eventData.isRight) {\n            templateElement.push(appointmentEndTime);\n          }\n        }\n      } else {\n        var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' + this.parent.getTimeString(record[fieldMapping.endTime]);\n        var appointmentTime = createElement('div', {\n          className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n          innerHTML: timeStr\n        });\n        var appointmentLocation = createElement('div', {\n          className: cls.LOCATION_CLASS,\n          innerHTML: record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || ''\n        });\n        templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n      }\n    }\n\n    append(templateElement, appointmentDetails);\n\n    if (!this.parent.isAdaptive && (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n      var iconClass = record[fieldMapping.id] === record[fieldMapping.recurrenceID] ? cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n      var recurrenceIcon = createElement('div', {\n        className: cls.ICON + ' ' + iconClass\n      });\n      isAllDay ? appointmentDetails.appendChild(recurrenceIcon) : appointmentWrapper.appendChild(recurrenceIcon);\n    }\n\n    this.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n\n    if (!isNullOrUndefined(this.cssClass)) {\n      addClass([appointmentWrapper], this.cssClass);\n    }\n\n    this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n    this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n    return appointmentWrapper;\n  };\n\n  VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n    var index = currentDay + count;\n    var countWrapper = allDayRow[index];\n\n    if (countWrapper.childElementCount <= 0) {\n      var innerCountWrap = createElement('div', {\n        className: cls.ROW_COUNT_WRAPPER_CLASS,\n        id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n      });\n      var moreIndicatorElement = createElement('div', {\n        className: cls.MORE_INDICATOR_CLASS,\n        attrs: {\n          'tabindex': '0',\n          'role': 'list',\n          'data-index': index.toString(),\n          'data-count': '1'\n        },\n        innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n      });\n      innerCountWrap.appendChild(moreIndicatorElement);\n      countWrapper.appendChild(innerCountWrap);\n      EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n    } else {\n      var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n      var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n      countCell.setAttribute('data-count', moreCount.toString());\n      countCell.innerHTML = '+' + moreCount + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n    }\n  };\n\n  VerticalEvent.prototype.renderSpannedIcon = function (element, spanEvent) {\n    var iconElement = createElement('div', {\n      className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON\n    });\n\n    if (spanEvent.isLeft) {\n      var iconLeft = iconElement.cloneNode();\n      addClass([iconLeft], cls.EVENT_ICON_LEFT_CLASS);\n      prepend([iconLeft], element);\n    }\n\n    if (spanEvent.isRight) {\n      var iconRight = iconElement.cloneNode();\n      addClass([iconRight], cls.EVENT_ICON_RIGHT_CLASS);\n      append([iconRight], element);\n    }\n\n    if (spanEvent.isTop) {\n      var iconTop = iconElement.cloneNode();\n      addClass([iconTop], cls.EVENT_ICON_UP_CLASS);\n      prepend([iconTop], element);\n    }\n\n    if (spanEvent.isBottom) {\n      var iconBottom = iconElement.cloneNode();\n      addClass([iconBottom], cls.EVENT_ICON_DOWN_CLASS);\n      append([iconBottom], element);\n    }\n  };\n\n  VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n    var currentDate = util.resetTime(this.dateRender[resource][day]);\n    var renderedDate = this.getRenderedDates(this.dateRender[resource]) || [currentDate];\n    var currentDay = renderedDate.filter(function (date) {\n      return date.getDay() === day;\n    });\n\n    if (currentDay.length === 0) {\n      currentDate = util.resetTime(renderedDate[0]);\n    }\n\n    var fieldMapping = this.parent.eventFields;\n    var startEndHours = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n    var event = extend({}, record, null, true);\n    event.isSpanned = {\n      isBottom: false,\n      isTop: false\n    };\n\n    if (record[fieldMapping.startTime].getTime() < startEndHours.startHour.getTime()) {\n      event[fieldMapping.startTime] = startEndHours.startHour;\n      event.isSpanned.isTop = true;\n    }\n\n    if (record[fieldMapping.endTime].getTime() > startEndHours.endHour.getTime()) {\n      event[fieldMapping.endTime] = startEndHours.endHour;\n      event.isSpanned.isBottom = true;\n    }\n\n    return event;\n  };\n\n  VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount) {\n    var _this = this;\n\n    var currentDates = this.getRenderedDates(this.dateRender[resource]) || this.dateRender[resource];\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      this.slots[0] = [this.dateRender[resource][dayIndex].getTime()];\n      currentDates = [this.dateRender[resource][dayIndex]];\n    }\n\n    var record = this.splitEvent(eventObj, currentDates)[0];\n    var allDayRowCell = this.element.querySelector('.' + cls.ALLDAY_CELLS_CLASS + ':first-child');\n    var cellTop = allDayRowCell.offsetTop;\n    var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n    var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n    var appWidth = 0;\n    var appLeft = '0%';\n    var topValue = 1;\n    var appLevel = 0;\n    var isDateRange = currentDates[0].getTime() <= eStart.getTime() && util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n\n    if (eStart <= eEnd && isDateRange) {\n      var isAlreadyRendered = [];\n\n      if (this.renderedAllDayEvents[resource]) {\n        isAlreadyRendered = this.renderedAllDayEvents[resource].filter(function (event) {\n          return event.Guid === eventObj.Guid;\n        });\n\n        if (this.parent.activeViewOptions.group.byDate) {\n          isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n            return event[_this.parent.eventFields.startTime] >= currentDates[dayIndex] && event[_this.parent.eventFields.endTime] <= util.addDays(new Date(+currentDates[dayIndex]), 1);\n          });\n        }\n      }\n\n      if (isAlreadyRendered.length === 0) {\n        var allDayDifference_1 = record.data.count;\n        var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n        record.Index = allDayIndex_1;\n        this.allDayLevel = this.allDayLevel < allDayIndex_1 ? allDayIndex_1 : this.allDayLevel;\n        var widthAdjustment = record.data.isRight ? 0 : this.parent.currentView === 'Day' ? 4 : 7;\n\n        if (allDayDifference_1 >= 0) {\n          appWidth = allDayDifference_1 * 100 - widthAdjustment;\n        }\n\n        if (isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n          this.renderedAllDayEvents[resource] = [];\n        }\n\n        this.renderedAllDayEvents[resource].push(extend({}, record, null, true));\n        var allDayRow_1 = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n        var wIndex_1 = this.parent.activeViewOptions.group.byDate ? this.resources.length * dayIndex + resource : dayCount;\n        var eventWrapper_1 = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':nth-child(' + (wIndex_1 + 1) + ')');\n        var appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n        addClass([appointmentElement_1], cls.ALLDAY_APPOINTMENT_CLASS);\n        var args = {\n          data: eventObj,\n          element: appointmentElement_1,\n          cancel: false\n        };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            eventWrapper_1.appendChild(appointmentElement_1);\n            var appHeight = appointmentElement_1.offsetHeight;\n            topValue += (allDayIndex_1 === 0 ? cellTop : cellTop + allDayIndex_1 * appHeight) + 1;\n            setStyleAttribute(appointmentElement_1, {\n              'width': appWidth + '%',\n              'top': formatUnit(topValue)\n            });\n\n            if (allDayIndex_1 > 1) {\n              _this.moreEvents.push(appointmentElement_1);\n\n              for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n              }\n            }\n\n            allDayRowCell.setAttribute('data-count', _this.allDayLevel.toString());\n            var allDayRowHeight = (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2 ? 3 * appHeight : (_this.allDayLevel + 1) * appHeight) + 4;\n\n            _this.setAllDayRowHeight(allDayRowHeight);\n\n            _this.addOrRemoveClass();\n\n            _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n          }\n        });\n      }\n    }\n  };\n\n  VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount) {\n    var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n    var eStart = record[this.fields.startTime];\n    var eEnd = record[this.fields.endTime];\n    var appWidth = '0%';\n    var appLeft = '0%';\n    var topValue = 0;\n    var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n    var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n    var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n\n    if (eStart <= eEnd && isValidEvent) {\n      var appHeight = this.getHeight(eStart, eEnd);\n\n      if (eStart.getTime() > schedule.startHour.getTime()) {\n        topValue = this.getTopValue(eStart, dayIndex, resource);\n      }\n\n      var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n      record.Index = appIndex;\n      this.overlapList.push(record);\n\n      if (this.overlapList.length > 1) {\n        if (isNullOrUndefined(this.overlapEvents[appIndex])) {\n          this.overlapEvents[appIndex] = [];\n        }\n\n        this.overlapEvents[appIndex].push(record);\n      } else {\n        this.overlapEvents = [];\n        this.overlapEvents.push([record]);\n      }\n\n      appWidth = this.getEventWidth();\n      var argsData = {\n        index: appIndex,\n        left: appLeft,\n        width: appWidth,\n        day: dayIndex,\n        dayIndex: dayCount,\n        record: record,\n        resource: resource\n      };\n      var tempData = this.adjustOverlapElements(argsData);\n      appWidth = tempData.appWidth;\n\n      if (isNullOrUndefined(this.renderedEvents[resource])) {\n        this.renderedEvents[resource] = [];\n      }\n\n      this.renderedEvents[resource].push(extend({}, record, null, true));\n      var appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n      setStyleAttribute(appointmentElement, {\n        'width': tempData.appWidth,\n        'height': appHeight + 'px',\n        'top': topValue + 'px'\n      });\n      var iconHeight = appointmentElement.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n      var maxHeight = appHeight - 40 - iconHeight;\n      var subjectElement = appointmentElement.querySelector('.' + cls.SUBJECT_CLASS);\n\n      if (!this.parent.isAdaptive && subjectElement) {\n        subjectElement.style.maxHeight = formatUnit(maxHeight);\n      }\n\n      var index = this.parent.activeViewOptions.group.byDate ? this.resources.length * dayIndex + resource : dayCount;\n      this.appendEvent(eventObj, appointmentElement, index, tempData.appLeft);\n      this.wireAppointmentEvents(appointmentElement, eventObj);\n    }\n  };\n\n  VerticalEvent.prototype.getEventWidth = function () {\n    var width = this.parent.currentView === 'Day' ? 97 : 94;\n    var tempWidth = (width - this.overlapEvents.length) / this.overlapEvents.length;\n    return (tempWidth < 0 ? 0 : tempWidth) + '%';\n  };\n\n  VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n    var tempLeft = (parseFloat(appWidth) + 1) * index;\n    return (tempLeft > 99 ? 99 : tempLeft) + '%';\n  };\n\n  VerticalEvent.prototype.getTopValue = function (date, day, resource) {\n    var startEndHours = util.getStartEndHours(util.resetTime(this.dateRender[resource][day]), this.startHour, this.endHour);\n    var startHour = startEndHours.startHour;\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return diffInMinutes * this.cellHeight * this.slotCount / this.interval;\n  };\n\n  VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n    var _this = this;\n\n    var fieldMapping = this.parent.eventFields;\n    var predicate;\n    var eventsList = [];\n    var appIndex = -1;\n    this.overlapEvents = [];\n\n    if (isAllDay) {\n      if (!isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n        var date_1 = util.resetTime(new Date(this.dateRender[resource][day].getTime()));\n        eventsList = this.renderedAllDayEvents[resource].filter(function (app) {\n          return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() && util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n        });\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          eventsList = this.filterEventsByResource(this.resources[resource], eventsList);\n        }\n      }\n    } else {\n      var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[resource]) ? this.renderedEvents[resource] : [];\n      var appointment_1 = [];\n      predicate = new Predicate(fieldMapping.endTime, 'greaterthan', record[fieldMapping.startTime]).and(new Predicate(fieldMapping.startTime, 'lessthan', record[fieldMapping.endTime])).or(new Predicate(fieldMapping.startTime, 'greaterthanorequal', record[fieldMapping.endTime]).and(new Predicate(fieldMapping.endTime, 'lessthanorequal', record[fieldMapping.startTime])));\n      this.overlapList = new DataManager({\n        json: appointmentList_1\n      }).executeLocal(new Query().where(predicate));\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.overlapList = this.filterEventsByResource(this.resources[resource], this.overlapList);\n      }\n\n      this.overlapList.forEach(function (obj) {\n        predicate = new Predicate(fieldMapping.endTime, 'greaterthanorequal', obj[fieldMapping.startTime]).and(new Predicate(fieldMapping.startTime, 'lessthanorequal', obj[fieldMapping.endTime]));\n        var filterList = new DataManager({\n          json: appointmentList_1\n        }).executeLocal(new Query().where(predicate));\n\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          filterList = _this.filterEventsByResource(_this.resources[resource], filterList);\n        }\n\n        var collection = _this.overlapList.filter(function (val) {\n          return filterList.indexOf(val) === -1;\n        });\n\n        return appointment_1.concat(collection);\n      });\n      this.overlapList = this.overlapList.concat(appointment_1);\n      eventsList = this.overlapList;\n\n      for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n        var event_3 = eventsList_1[_i];\n        var record_1 = event_3;\n        var index = record_1.Index;\n        isNullOrUndefined(this.overlapEvents[index]) ? this.overlapEvents[index] = [event_3] : this.overlapEvents[index].push(event_3);\n      }\n    }\n\n    if (eventsList.length > 0) {\n      var appLevel = eventsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n\n    return appIndex === -1 ? 0 : appIndex;\n  };\n\n  VerticalEvent.prototype.adjustOverlapElements = function (args) {\n    var data = {\n      appWidth: args.width,\n      appLeft: args.left\n    };\n\n    for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n      if (!isNullOrUndefined(this.overlapEvents[i])) {\n        for (var j = 0, length2 = this.overlapEvents[i].length; j < length2; j++) {\n          var dayCount = this.parent.activeViewOptions.group.byDate ? this.resources.length * args.day + args.resource : args.dayIndex;\n          var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n\n          if (element.childElementCount > 0) {\n            var eleGuid = this.overlapEvents[i][j].Guid;\n\n            if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n              var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n\n              if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                this.parent.enableRtl ? apps.style.right = this.getEventLeft(args.width, i) : apps.style.left = this.getEventLeft(args.width, i);\n                apps.style.width = parseFloat(args.width) + '%';\n                data.appWidth = apps.style.width;\n              }\n            } else {\n              var appWidth = args.width;\n\n              if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                appWidth = this.getEventWidth();\n              }\n\n              data.appWidth = appWidth;\n              data.appLeft = this.getEventLeft(appWidth, args.index);\n            }\n          }\n        }\n      }\n    }\n\n    return data;\n  };\n\n  VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n    for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n      var element = _a[_i];\n      element.style.height = height / 12 + 'em';\n    }\n\n    this.animation.animate(this.allDayElement[0]);\n  };\n\n  VerticalEvent.prototype.addOrRemoveClass = function () {\n    var _this = this;\n\n    this.moreEvents.filter(function (element) {\n      if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n        addClass([element], cls.EVENT_COUNT_CLASS);\n        element.setAttribute('tabindex', '-1');\n      } else {\n        removeClass([element], cls.EVENT_COUNT_CLASS);\n        element.setAttribute('tabindex', '0');\n      }\n    });\n    var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n\n    if (this.parent.uiStateValues.expand) {\n      removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n      addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n    } else {\n      removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n      addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n    }\n\n    this.allDayLevel > 2 ? removeClass([moreEventCount], cls.DISABLE_CLASS) : addClass([moreEventCount], cls.DISABLE_CLASS);\n    var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n    countCell.filter(function (element) {\n      !_this.parent.uiStateValues.expand && _this.allDayLevel > 2 ? removeClass([element], cls.DISABLE_CLASS) : addClass([element], cls.DISABLE_CLASS);\n    });\n  };\n\n  VerticalEvent.prototype.getEventHeight = function () {\n    var eventElement = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      styles: 'visibility:hidden'\n    });\n    var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n    eventWrapper.appendChild(eventElement);\n    var height = eventElement.offsetHeight;\n    remove(eventElement);\n    return height;\n  };\n\n  VerticalEvent.prototype.rowExpandCollapse = function () {\n    var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n    this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n    var rowHeight;\n\n    if (this.parent.uiStateValues.expand) {\n      target.setAttribute('title', 'Collapse-all-day-section');\n      target.setAttribute('aria-label', 'Collapse section');\n      rowHeight = (this.allDayLevel + 1) * this.getEventHeight() + 4;\n    } else {\n      target.setAttribute('title', 'Expand-all-day-section');\n      target.setAttribute('aria-label', 'Expand section');\n      rowHeight = 3 * this.getEventHeight() + 4;\n    }\n\n    this.setAllDayRowHeight(rowHeight);\n    this.addOrRemoveClass();\n    this.animation.animate(target);\n  };\n\n  VerticalEvent.prototype.animationUiUpdate = function () {\n    this.parent.notify(events.contentReady, {});\n  };\n\n  return VerticalEvent;\n}(EventBase);\n\nexport { VerticalEvent };","map":{"version":3,"sources":["C:/Users/grigo/OneDrive/Рабочий стол/CRM/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/vertical-view.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","append","createElement","extend","EventHandler","prepend","Animation","formatUnit","isNullOrUndefined","setStyleAttribute","remove","removeClass","addClass","DataManager","Query","Predicate","EventBase","util","events","cls","VerticalEvent","_super","parent","_this","call","dateRender","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","slotCount","activeViewOptions","timeScale","interval","allDayLevel","startHour","activeView","getStartHour","endHour","getEndHour","element","getPanel","fields","eventFields","animation","progress","animationUiUpdate","bind","addEventListener","renderAppointments","wrapperElements","slice","querySelectorAll","BLOCK_APPOINTMENT_CLASS","APPOINTMENT_CLASS","ROW_COUNT_WRAPPER_CLASS","forEach","querySelector","WORK_CELLS_CLASS","allDayElement","ALLDAY_CELLS_CLASS","setAllDayRowHeight","eventsProcessed","length","blockProcessed","expandCollapse","ALLDAY_APPOINTMENT_SECTION_CLASS","rowExpandCollapse","add","initializeValues","processBlockEvents","renderEvents","filter","item","index","arr","map","Guid","indexOf","ALLDAY_ROW_ANIMATE_CLASS","slots","push","renderDates","date","notify","contentReady","resources","group","uiStateValues","isGroupAdaptive","resourceBase","lastResourceLevel","groupIndex","cellHeight","parseFloat","getBoundingClientRect","height","toFixed","resource","isValidEvent","eventObj","start","end","schedule","isHourRange","getTime","isSameRange","startTime","endTime","getHeight","appHeight","appendEvent","appointmentElement","appLeft","appointmentWrap","APPOINTMENT_WRAPPER_CLASS","enableRtl","eventType","classList","contains","args","data","cancel","type","trigger","eventRendered","eventArgs","appendChild","getResourceList","dateCount","_i","resources_1","day","length_1","startDate","Date","endDate","addDays","filterEvents","_a","filterEvents_1","event_1","setValues","renderBlockEvents","cssClass","groupOrder","dayIndex","dayCount","spannedData","isSpannedEvent","eStart","eEnd","currentDate","resetTime","getStartEndHours","blockTop","blockHeight","isAllDay","contentWrap","CONTENT_WRAP_CLASS","offsetHeight","getTopValue","createBlockAppointmentElement","byDate","eventCollection","sortByDateTime","undefined","resources_2","renderedDate","getRenderedDates","length_2","filterEvents_2","event_2","renderAllDayEvents","isAllDayAppointment","renderNormalEvents","event","resourceIndex","getCssClass","apply","value","createAppointmentElement","record","fieldMapping","recordSubject","subject","eventSettings","default","appointmentWrapper","className","attrs","id","eventBase","getReadonlyAttribute","isReadonly","appointmentDetails","APPOINTMENT_DETAILS","setAttribute","toString","templateElement","eventData","eventTemplate","elementId","viewName","eventTemplateName","templateId","templateArgs","addLocalOffsetToEvent","getAppointmentTemplate","appointmentSubject","SUBJECT_CLASS","innerHTML","appointmentStartTime","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","appointmentEndTime","isLeft","isRight","timeStr","appointmentTime","appointmentLocation","LOCATION_CLASS","location","recurrenceRule","recurrenceID","iconClass","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","recurrenceIcon","ICON","renderSpannedIcon","applyResourceColor","renderResizeHandler","createMoreIndicator","allDayRow","count","currentDay","countWrapper","childElementCount","innerCountWrap","moreIndicatorElement","MORE_INDICATOR_CLASS","localeObj","getConstant","countCell","moreCount","parseInt","getAttribute","spanEvent","iconElement","EVENT_INDICATOR_CLASS","iconLeft","cloneNode","EVENT_ICON_LEFT_CLASS","iconRight","EVENT_ICON_RIGHT_CLASS","isTop","iconTop","EVENT_ICON_UP_CLASS","isBottom","iconBottom","EVENT_ICON_DOWN_CLASS","getDay","startEndHours","isSpanned","currentDates","splitEvent","allDayRowCell","cellTop","offsetTop","appWidth","topValue","appLevel","isDateRange","isAlreadyRendered","allDayDifference_1","allDayIndex_1","getOverlapIndex","Index","widthAdjustment","currentView","allDayRow_1","ALLDAY_ROW_CLASS","children","wIndex_1","eventWrapper_1","ALLDAY_APPOINTMENT_WRAPPER_CLASS","appointmentElement_1","ALLDAY_APPOINTMENT_CLASS","length_3","allDayRowHeight","expand","addOrRemoveClass","wireAppointmentEvents","appIndex","getEventWidth","argsData","left","width","tempData","adjustOverlapElements","iconHeight","maxHeight","subjectElement","style","tempWidth","getEventLeft","tempLeft","diffInMinutes","getHours","getMinutes","predicate","eventsList","date_1","app","filterEventsByResource","appointmentList_1","appointment_1","and","or","json","executeLocal","where","obj","filterList","collection","val","concat","eventsList_1","event_3","record_1","getSmallestMissingNumber","i","length1","j","length2","eleGuid","apps","right","animate","EVENT_COUNT_CLASS","moreEventCount","APPOINTMENT_ROW_EXPAND_CLASS","APPOINTMENT_ROW_COLLAPSE_CLASS","getEventHeight","eventElement","styles","eventWrapper","target","rowHeight"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { append, createElement, extend, EventHandler, prepend, Animation, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @class */ (function (_super) {\n    __extends(VerticalEvent, _super);\n    /**\n     * Constructor for vertical view\n     */\n    function VerticalEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateRender = [];\n        _this.renderedEvents = [];\n        _this.renderedAllDayEvents = [];\n        _this.overlapEvents = [];\n        _this.moreEvents = [];\n        _this.overlapList = [];\n        _this.allDayEvents = [];\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.allDayLevel = 0;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.animation = new Animation({ progress: _this.animationUiUpdate.bind(_this) });\n        _this.addEventListener();\n        return _this;\n    }\n    VerticalEvent.prototype.renderAppointments = function () {\n        var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS +\n            ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        wrapperElements.forEach(function (element) { return remove(element); });\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.Guid; }).indexOf(item.Guid);\n            });\n            removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            this.renderEvents('allDayEvents');\n        }\n        this.parent.notify(events.contentReady, {});\n        addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n    };\n    VerticalEvent.prototype.initializeValues = function () {\n        var _this = this;\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        this.cellHeight = parseFloat(this.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.resources.forEach(function (resource, index) { return _this.dateRender[index] = resource.renderDates; });\n        }\n    };\n    VerticalEvent.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n        var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n        var isSameRange = schedule.startHour.getTime() <= start.getTime() &&\n            eventObj[this.fields.startTime].getTime() >= schedule.startHour.getTime() &&\n            eventObj[this.fields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n        return isHourRange || isSameRange;\n    };\n    VerticalEvent.prototype.getHeight = function (start, end) {\n        var appHeight = (end.getTime() - start.getTime()) / (60 * 1000) * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight <= 0) ? this.cellHeight : appHeight;\n        return appHeight;\n    };\n    VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n        var appointmentWrap = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                appointmentWrap[index].appendChild(appointmentElement);\n            }\n        });\n    };\n    VerticalEvent.prototype.processBlockEvents = function () {\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            var renderDates = this.dateRender[resource];\n            for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[resource]);\n                for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n                    var event_1 = filterEvents_1[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_1, resource);\n                    }\n                    this.renderBlockEvents(event_1, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = spannedData[this.fields.startTime];\n        var eEnd = spannedData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule)) {\n            var blockTop = void 0;\n            var blockHeight = void 0;\n            if (spannedData[this.fields.isAllDay]) {\n                var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n            }\n            var appointmentElement = this.createBlockAppointmentElement(eventObj, resource);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    };\n    VerticalEvent.prototype.renderEvents = function (eventType) {\n        removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        var eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        var resources = this.getResourceList();\n        var dateCount = 0;\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            this.slots = [];\n            var renderDates = this.dateRender[resource];\n            var renderedDate = this.getRenderedDates(renderDates) || renderDates;\n            this.slots.push(renderDates.map(function (date) { return +date; }));\n            for (var day = 0, length_2 = renderDates.length; day < length_2 &&\n                renderDates[day] <= renderedDate[renderedDate.length - 1]; day++) {\n                this.renderedEvents = [];\n                var startDate = new Date(renderDates[day].getTime());\n                var endDate = util.addDays(renderDates[day], 1);\n                var filterEvents = this.filterEvents(startDate, endDate, eventCollection, this.resources[resource]);\n                for (var _a = 0, filterEvents_2 = filterEvents; _a < filterEvents_2.length; _a++) {\n                    var event_2 = filterEvents_2[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_2, resource);\n                    }\n                    if (eventType === 'allDayEvents') {\n                        this.renderAllDayEvents(event_2, day, resource, dateCount);\n                    }\n                    else {\n                        if (this.isAllDayAppointment(event_2)) {\n                            this.allDayEvents.push(extend({}, event_2, null, true));\n                        }\n                        else {\n                            this.renderNormalEvents(event_2, day, resource, dateCount);\n                        }\n                    }\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[resourceIndex].cssClass;\n            this.groupOrder = this.resources[resourceIndex].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    };\n    VerticalEvent.prototype.getResourceList = function () {\n        var resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map(function (value, index) { return index; });\n        return resources;\n    };\n    VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n        var fieldMapping = this.parent.eventFields;\n        var recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-selected': 'false',\n                'aria-grabbed': 'true'\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        var templateElement;\n        var eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var elementId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = elementId + viewName + 'eventTemplate';\n            var templateArgs = util.addLocalOffsetToEvent(record, this.parent.eventFields);\n            templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: recordSubject });\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    var appointmentStartTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    var appointmentEndTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime]),\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                var appointmentTime = createElement('div', {\n                    className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                    innerHTML: timeStr,\n                });\n                var appointmentLocation = createElement('div', {\n                    className: cls.LOCATION_CLASS,\n                    innerHTML: (record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || '')\n                });\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            var iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            var recurrenceIcon = createElement('div', { className: cls.ICON + ' ' + iconClass });\n            isAllDay ? appointmentDetails.appendChild(recurrenceIcon) : appointmentWrapper.appendChild(recurrenceIcon);\n        }\n        this.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n        var index = currentDay + count;\n        var countWrapper = allDayRow[index];\n        if (countWrapper.childElementCount <= 0) {\n            var innerCountWrap = createElement('div', {\n                className: cls.ROW_COUNT_WRAPPER_CLASS,\n                id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            var moreIndicatorElement = createElement('div', {\n                className: cls.MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'role': 'list', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n            var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + moreCount + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    };\n    VerticalEvent.prototype.renderSpannedIcon = function (element, spanEvent) {\n        var iconElement = createElement('div', { className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON });\n        if (spanEvent.isLeft) {\n            var iconLeft = iconElement.cloneNode();\n            addClass([iconLeft], cls.EVENT_ICON_LEFT_CLASS);\n            prepend([iconLeft], element);\n        }\n        if (spanEvent.isRight) {\n            var iconRight = iconElement.cloneNode();\n            addClass([iconRight], cls.EVENT_ICON_RIGHT_CLASS);\n            append([iconRight], element);\n        }\n        if (spanEvent.isTop) {\n            var iconTop = iconElement.cloneNode();\n            addClass([iconTop], cls.EVENT_ICON_UP_CLASS);\n            prepend([iconTop], element);\n        }\n        if (spanEvent.isBottom) {\n            var iconBottom = iconElement.cloneNode();\n            addClass([iconBottom], cls.EVENT_ICON_DOWN_CLASS);\n            append([iconBottom], element);\n        }\n    };\n    VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n        var currentDate = util.resetTime(this.dateRender[resource][day]);\n        var renderedDate = this.getRenderedDates(this.dateRender[resource]) || [currentDate];\n        var currentDay = renderedDate.filter(function (date) { return date.getDay() === day; });\n        if (currentDay.length === 0) {\n            currentDate = util.resetTime(renderedDate[0]);\n        }\n        var fieldMapping = this.parent.eventFields;\n        var startEndHours = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var event = extend({}, record, null, true);\n        event.isSpanned = { isBottom: false, isTop: false };\n        if (record[fieldMapping.startTime].getTime() < startEndHours.startHour.getTime()) {\n            event[fieldMapping.startTime] = startEndHours.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[fieldMapping.endTime].getTime() > startEndHours.endHour.getTime()) {\n            event[fieldMapping.endTime] = startEndHours.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        return event;\n    };\n    VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var _this = this;\n        var currentDates = this.getRenderedDates(this.dateRender[resource]) || this.dateRender[resource];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[resource][dayIndex].getTime()];\n            currentDates = [this.dateRender[resource][dayIndex]];\n        }\n        var record = this.splitEvent(eventObj, currentDates)[0];\n        var allDayRowCell = this.element.querySelector('.' + cls.ALLDAY_CELLS_CLASS + ':first-child');\n        var cellTop = allDayRowCell.offsetTop;\n        var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        var appWidth = 0;\n        var appLeft = '0%';\n        var topValue = 1;\n        var appLevel = 0;\n        var isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange) {\n            var isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[resource]) {\n                isAlreadyRendered = this.renderedAllDayEvents[resource].filter(function (event) {\n                    return event.Guid === eventObj.Guid;\n                });\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n                        return event[_this.parent.eventFields.startTime] >= currentDates[dayIndex] &&\n                            event[_this.parent.eventFields.endTime] <= util.addDays(new Date(+currentDates[dayIndex]), 1);\n                    });\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                var allDayDifference_1 = record.data.count;\n                var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex_1;\n                this.allDayLevel = (this.allDayLevel < allDayIndex_1) ? allDayIndex_1 : this.allDayLevel;\n                var widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference_1 >= 0) {\n                    appWidth = (allDayDifference_1 * 100) - widthAdjustment;\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                    this.renderedAllDayEvents[resource] = [];\n                }\n                this.renderedAllDayEvents[resource].push(extend({}, record, null, true));\n                var allDayRow_1 = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n                var wIndex_1 = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n                var eventWrapper_1 = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex_1 + 1) + ')');\n                var appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n                addClass([appointmentElement_1], cls.ALLDAY_APPOINTMENT_CLASS);\n                var args = { data: eventObj, element: appointmentElement_1, cancel: false };\n                this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        eventWrapper_1.appendChild(appointmentElement_1);\n                        var appHeight = appointmentElement_1.offsetHeight;\n                        topValue += (allDayIndex_1 === 0 ? cellTop : (cellTop + (allDayIndex_1 * appHeight))) + 1;\n                        setStyleAttribute(appointmentElement_1, { 'width': appWidth + '%', 'top': formatUnit(topValue) });\n                        if (allDayIndex_1 > 1) {\n                            _this.moreEvents.push(appointmentElement_1);\n                            for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n                            }\n                        }\n                        allDayRowCell.setAttribute('data-count', _this.allDayLevel.toString());\n                        var allDayRowHeight = ((!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ?\n                            (3 * appHeight) : ((_this.allDayLevel + 1) * appHeight)) + 4;\n                        _this.setAllDayRowHeight(allDayRowHeight);\n                        _this.addOrRemoveClass();\n                        _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n                    }\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = record[this.fields.startTime];\n        var eEnd = record[this.fields.endTime];\n        var appWidth = '0%';\n        var appLeft = '0%';\n        var topValue = 0;\n        var currentDate = util.resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if (eStart <= eEnd && isValidEvent) {\n            var appHeight = this.getHeight(eStart, eEnd);\n            if (eStart.getTime() > schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart, dayIndex, resource);\n            }\n            var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[appIndex])) {\n                    this.overlapEvents[appIndex] = [];\n                }\n                this.overlapEvents[appIndex].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            appWidth = this.getEventWidth();\n            var argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayIndex, dayIndex: dayCount, record: record, resource: resource\n            };\n            var tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[resource])) {\n                this.renderedEvents[resource] = [];\n            }\n            this.renderedEvents[resource].push(extend({}, record, null, true));\n            var appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            setStyleAttribute(appointmentElement, { 'width': tempData.appWidth, 'height': appHeight + 'px', 'top': topValue + 'px' });\n            var iconHeight = appointmentElement.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n            var maxHeight = appHeight - 40 - iconHeight;\n            var subjectElement = appointmentElement.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            var index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement, eventObj);\n        }\n    };\n    VerticalEvent.prototype.getEventWidth = function () {\n        var width = this.parent.currentView === 'Day' ? 97 : 94;\n        var tempWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length);\n        return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    };\n    VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n        var tempLeft = (parseFloat(appWidth) + 1) * index;\n        return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    };\n    VerticalEvent.prototype.getTopValue = function (date, day, resource) {\n        var startEndHours = util.getStartEndHours(util.resetTime(this.dateRender[resource][day]), this.startHour, this.endHour);\n        var startHour = startEndHours.startHour;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.cellHeight * this.slotCount) / this.interval;\n    };\n    VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n        var _this = this;\n        var fieldMapping = this.parent.eventFields;\n        var predicate;\n        var eventsList = [];\n        var appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                var date_1 = util.resetTime(new Date(this.dateRender[resource][day].getTime()));\n                eventsList = this.renderedAllDayEvents[resource].filter(function (app) {\n                    return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() &&\n                        util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n                });\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[resource], eventsList);\n                }\n            }\n        }\n        else {\n            var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[resource]) ? this.renderedEvents[resource] : [];\n            var appointment_1 = [];\n            predicate = new Predicate(fieldMapping.endTime, 'greaterthan', record[fieldMapping.startTime]).\n                and(new Predicate(fieldMapping.startTime, 'lessthan', record[fieldMapping.endTime])).\n                or(new Predicate(fieldMapping.startTime, 'greaterthanorequal', record[fieldMapping.endTime]).\n                and(new Predicate(fieldMapping.endTime, 'lessthanorequal', record[fieldMapping.startTime])));\n            this.overlapList = new DataManager({ json: appointmentList_1 }).executeLocal(new Query().where(predicate));\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[resource], this.overlapList);\n            }\n            this.overlapList.forEach(function (obj) {\n                predicate = new Predicate(fieldMapping.endTime, 'greaterthanorequal', obj[fieldMapping.startTime]).\n                    and(new Predicate(fieldMapping.startTime, 'lessthanorequal', obj[fieldMapping.endTime]));\n                var filterList = new DataManager({ json: appointmentList_1 }).executeLocal(new Query().where(predicate));\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = _this.filterEventsByResource(_this.resources[resource], filterList);\n                }\n                var collection = _this.overlapList.filter(function (val) { return filterList.indexOf(val) === -1; });\n                return appointment_1.concat(collection);\n            });\n            this.overlapList = this.overlapList.concat(appointment_1);\n            eventsList = this.overlapList;\n            for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n                var event_3 = eventsList_1[_i];\n                var record_1 = event_3;\n                var index = record_1.Index;\n                (isNullOrUndefined(this.overlapEvents[index])) ? this.overlapEvents[index] = [event_3] :\n                    this.overlapEvents[index].push(event_3);\n            }\n        }\n        if (eventsList.length > 0) {\n            var appLevel = eventsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    VerticalEvent.prototype.adjustOverlapElements = function (args) {\n        var data = { appWidth: args.width, appLeft: args.left };\n        for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[i])) {\n                for (var j = 0, length2 = this.overlapEvents[i].length; j < length2; j++) {\n                    var dayCount = this.parent.activeViewOptions.group.byDate ? (this.resources.length * args.day) + args.resource :\n                        args.dayIndex;\n                    var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element.childElementCount > 0) {\n                        var eleGuid = this.overlapEvents[i][j].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                (this.parent.enableRtl) ? apps.style.right = this.getEventLeft(args.width, i) :\n                                    apps.style.left = this.getEventLeft(args.width, i);\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            var appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                appWidth = this.getEventWidth();\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = this.getEventLeft(appWidth, args.index);\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    };\n    VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n        for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.height = (height / 12) + 'em';\n        }\n        this.animation.animate(this.allDayElement[0]);\n    };\n    VerticalEvent.prototype.addOrRemoveClass = function () {\n        var _this = this;\n        this.moreEvents.filter(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                addClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        (this.allDayLevel > 2) ? removeClass([moreEventCount], cls.DISABLE_CLASS) : addClass([moreEventCount], cls.DISABLE_CLASS);\n        var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        countCell.filter(function (element) {\n            (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ? removeClass([element], cls.DISABLE_CLASS) :\n                addClass([element], cls.DISABLE_CLASS);\n        });\n    };\n    VerticalEvent.prototype.getEventHeight = function () {\n        var eventElement = createElement('div', { className: cls.APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        var height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    };\n    VerticalEvent.prototype.rowExpandCollapse = function () {\n        var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        var rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', 'Collapse-all-day-section');\n            target.setAttribute('aria-label', 'Collapse section');\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', 'Expand-all-day-section');\n            target.setAttribute('aria-label', 'Expand section');\n            rowHeight = (3 * this.getEventHeight()) + 4;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    };\n    VerticalEvent.prototype.animationUiUpdate = function () {\n        this.parent.notify(events.contentReady, {});\n    };\n    return VerticalEvent;\n}(EventBase));\nexport { VerticalEvent };\n"]},"metadata":{},"sourceType":"module"}