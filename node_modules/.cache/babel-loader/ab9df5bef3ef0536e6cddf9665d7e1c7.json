{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { EventHandler, formatUnit, remove, createElement, addClass, closest, prepend, isBlazor } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { WorkCellInteraction } from '../actions/work-cells';\nimport { YearEvent } from '../event-renderer/year';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * year view\n */\n\nvar Year =\n/** @class */\nfunction (_super) {\n  __extends(Year, _super);\n  /**\n   * Constructor for year view\n   */\n\n\n  function Year(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-year-view';\n    _this.isInverseTableSelect = false;\n    _this.workCellAction = new WorkCellInteraction(parent);\n    return _this;\n  }\n\n  Year.prototype.renderLayout = function (className) {\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n    addClass([this.element], [this.viewClass, viewTypeClass, className]);\n    this.renderPanel(className);\n    var calendarTable = this.createTableLayout(cls.OUTER_TABLE_CLASS);\n    this.element.appendChild(calendarTable);\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    var calendarTBody = calendarTable.querySelector('tbody');\n    this.rowCount = this.getRowColumnCount('row');\n    this.columnCount = this.getRowColumnCount('column');\n    this.renderHeader(calendarTBody);\n    this.renderContent(calendarTBody);\n\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      this.generateColumnLevels();\n      this.renderResourceMobileLayout();\n    }\n\n    this.wireEvents(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), 'scroll');\n    this.parent.notify(event.contentReady, {});\n  }; // tslint:disable-next-line:no-empty\n\n\n  Year.prototype.renderHeader = function (headerWrapper) {};\n\n  Year.prototype.renderContent = function (content) {\n    var tr = createElement('tr');\n    content.appendChild(tr);\n    var td = createElement('td');\n    tr.appendChild(td);\n    this.element.querySelector('tbody').appendChild(tr);\n    var contentWrapper = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    td.appendChild(contentWrapper);\n    var calendarTable = this.createTableLayout('e-calendar-table');\n    contentWrapper.appendChild(calendarTable);\n    var cTr = createElement('tr');\n    calendarTable.querySelector('tbody').appendChild(cTr);\n    var cTd = createElement('td');\n    cTr.appendChild(cTd);\n    var calendarWrapper = createElement('div', {\n      className: 'e-calendar-wrapper'\n    });\n    cTd.appendChild(calendarWrapper);\n    var monthCollection = Array.apply(null, {\n      length: 12\n    }).map(function (value, index) {\n      return index;\n    });\n\n    for (var _i = 0, monthCollection_1 = monthCollection; _i < monthCollection_1.length; _i++) {\n      var month = monthCollection_1[_i];\n      var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, this.parent.selectedDate.getDate());\n      var calendarElement = createElement('div', {\n        className: 'e-month-calendar e-calendar',\n        attrs: {\n          'data-role': 'calendar'\n        }\n      });\n      calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n      calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n      calendarWrapper.appendChild(calendarElement);\n    }\n  };\n\n  Year.prototype.renderCalendarHeader = function (currentDate) {\n    var headerWrapper = createElement('div', {\n      className: 'e-header e-month'\n    });\n    var headerContent = createElement('div', {\n      className: 'e-day e-title',\n      innerHTML: this.getMonthName(currentDate)\n    });\n    headerWrapper.appendChild(headerContent);\n    this.parent.trigger(event.renderCell, {\n      elementType: 'headerCells',\n      element: headerContent,\n      date: currentDate\n    });\n    return headerWrapper;\n  };\n\n  Year.prototype.renderCalendarContent = function (currentDate) {\n    var dateCollection = this.getMonthDates(currentDate);\n    var contentWrapper = createElement('div', {\n      className: 'e-content e-month'\n    });\n    var contentTable = this.createTableLayout('e-calendar-table ' + cls.CONTENT_TABLE_CLASS);\n    contentWrapper.appendChild(contentTable);\n    var thead = createElement('thead', {\n      className: 'e-week-header'\n    });\n    var tr = createElement('tr');\n    var currentWeek = util.getWeekFirstDate(util.firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n\n    for (var i = 0; i < util.WEEK_LENGTH; i++) {\n      tr.appendChild(createElement('th', {\n        innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()]\n      }));\n      currentWeek = new Date(currentWeek.getTime() + util.MS_PER_DAY);\n    }\n\n    thead.appendChild(tr);\n    prepend([thead], contentTable);\n    var tbody = contentTable.querySelector('tbody');\n\n    while (dateCollection.length > 0) {\n      var weekDates = dateCollection.splice(0, util.WEEK_LENGTH);\n      var tr_1 = createElement('tr', {\n        attrs: {\n          'role': 'row'\n        }\n      });\n\n      if (this.parent.activeViewOptions.showWeekNumber) {\n        var weekNumber = util.getWeekNumber(weekDates.slice(-1)[0]);\n        var td = createElement('td', {\n          className: 'e-week-number',\n          attrs: {\n            'role': 'gridcell',\n            'title': 'Week ' + weekNumber\n          },\n          innerHTML: weekNumber.toString()\n        });\n        tr_1.appendChild(td);\n        this.parent.trigger(event.renderCell, {\n          elementType: 'weekNumberCells',\n          element: td\n        });\n      }\n\n      for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n        var date = weekDates_1[_i];\n        var td = createElement('td', {\n          className: 'e-cell ' + cls.WORK_CELLS_CLASS,\n          attrs: {\n            'role': 'gridcell',\n            'aria-selected': 'false',\n            'data-date': date.getTime().toString()\n          }\n        });\n        td.appendChild(createElement('span', {\n          className: 'e-day',\n          innerHTML: date.getDate().toString()\n        }));\n        var classList = [];\n\n        if (currentDate.getMonth() !== date.getMonth()) {\n          classList.push(cls.OTHERMONTH_CLASS);\n        }\n\n        if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n          classList = classList.concat(['e-today', 'e-selected']);\n        }\n\n        if (classList.length > 0) {\n          addClass([td], classList);\n        }\n\n        tr_1.appendChild(td);\n        this.wireEvents(td, 'cell');\n        this.parent.trigger(event.renderCell, {\n          elementType: 'workCells',\n          element: td,\n          date: date\n        });\n      }\n\n      tbody.appendChild(tr_1);\n    }\n\n    return contentWrapper;\n  };\n\n  Year.prototype.createTableColGroup = function (count) {\n    var colGroupEle = createElement('colgroup');\n\n    for (var i = 0; i < count; i++) {\n      colGroupEle.appendChild(createElement('col'));\n    }\n\n    return colGroupEle;\n  };\n\n  Year.prototype.getMonthName = function (date) {\n    var month = this.parent.globalize.formatDate(date, {\n      format: this.parent.activeViewOptions.dateFormat || 'MMMM',\n      calendar: this.parent.getCalendarMode()\n    });\n    return util.capitalizeFirstWord(month, 'multiple');\n  };\n\n  Year.prototype.generateColumnLevels = function () {\n    var colLevels = [];\n    var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      colLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n      if (this.parent.uiStateValues.isGroupAdaptive) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n      }\n    } else {\n      colLevels.push(level);\n    }\n\n    colLevels.pop();\n    this.colLevels = colLevels;\n    return colLevels;\n  };\n\n  Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n    if (startHour === void 0) {\n      startHour = this.parent.workHours.start;\n    }\n\n    if (endHour === void 0) {\n      endHour = this.parent.workHours.end;\n    }\n\n    var dateCol = [{\n      date: renderDates[0],\n      type: 'dateHeader',\n      className: [cls.HEADER_CELLS_CLASS],\n      colSpan: 1,\n      workDays: workDays,\n      startHour: new Date(+this.parent.globalize.parseDate(startHour, {\n        skeleton: 'Hm'\n      })),\n      endHour: new Date(+this.parent.globalize.parseDate(endHour, {\n        skeleton: 'Hm'\n      }))\n    }];\n    return dateCol;\n  };\n\n  Year.prototype.getMonthDates = function (date) {\n    var startDate = util.getWeekFirstDate(util.firstDateOfMonth(date), this.parent.firstDayOfWeek);\n    var endDate = util.addDays(new Date(+startDate), 6 * util.WEEK_LENGTH);\n    var dateCollection = [];\n\n    for (var start = startDate.getTime(); start < endDate.getTime(); start = start + util.MS_PER_DAY) {\n      dateCollection.push(util.resetTime(new Date(start)));\n    }\n\n    return dateCollection;\n  };\n\n  Year.prototype.getRowColumnCount = function (type) {\n    var monthCount = 12;\n    var year = this.parent.selectedDate.getFullYear();\n    var months = [];\n\n    for (var month = 0; month < monthCount; month++) {\n      months.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n    }\n\n    var maxCount = Math.max.apply(Math, months);\n    var count;\n\n    if (type === 'row') {\n      count = this.parent.activeViewOptions.orientation === 'Horizontal' ? monthCount : maxCount;\n    } else {\n      count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : monthCount;\n    }\n\n    return count;\n  };\n\n  Year.prototype.isCurrentDate = function (date) {\n    return util.resetTime(new Date()).getTime() === util.resetTime(new Date(date.getTime())).getTime();\n  };\n\n  Year.prototype.onCellClick = function (e) {\n    var target = closest(e.target, '.' + cls.WORK_CELLS_CLASS);\n    var startDate = this.parent.getDateFromElement(target);\n    var endDate = util.addDays(new Date(startDate.getTime()), 1);\n    var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n    var moreEventArgs = {\n      date: startDate,\n      event: filteredEvents,\n      element: e.target\n    };\n    this.parent.quickPopup.moreEventClick(moreEventArgs, new Date());\n  };\n\n  Year.prototype.onContentScroll = function (e) {\n    var target = e.target;\n    var headerWrapper = this.getDatesHeaderElement();\n\n    if (headerWrapper) {\n      headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n    }\n\n    var monthWrapper = this.element.querySelector('.' + cls.MONTH_HEADER_WRAPPER);\n\n    if (monthWrapper) {\n      monthWrapper.scrollTop = target.scrollTop;\n    }\n  };\n\n  Year.prototype.onScrollUiUpdate = function (args) {\n    var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n    var headerWrapper = this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n\n    if (headerWrapper) {\n      height -= headerWrapper.offsetHeight;\n    }\n\n    var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n    if (contentWrapper) {\n      contentWrapper.style.height = formatUnit(height);\n    }\n\n    var leftPanelElement = this.element.querySelector('.' + cls.MONTH_HEADER_WRAPPER);\n\n    if (leftPanelElement) {\n      leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(contentWrapper));\n    }\n\n    if (!this.parent.isAdaptive && headerWrapper) {\n      var scrollBarWidth = util.getScrollBarWidth(); // tslint:disable:no-any\n\n      if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n        headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n        headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n      } else {\n        headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n        headerWrapper.style[args.cssProperties.padding] = '';\n      } // tslint:enable:no-any\n\n    }\n  };\n\n  Year.prototype.startDate = function () {\n    var startDate = new Date(this.parent.selectedDate.getFullYear(), 0, 1);\n    return util.getWeekFirstDate(startDate, this.parent.firstDayOfWeek);\n  };\n\n  Year.prototype.endDate = function () {\n    var endDate = new Date(this.parent.selectedDate.getFullYear(), 11, 31);\n    return util.addDays(util.getWeekLastDate(endDate, this.parent.firstDayOfWeek), 1);\n  };\n\n  Year.prototype.getEndDateFromStartDate = function (start) {\n    return util.addDays(new Date(start.getTime()), 1);\n  };\n\n  Year.prototype.getNextPreviousDate = function (type) {\n    return util.addYears(this.parent.selectedDate, type === 'next' ? 1 : -1);\n  };\n\n  Year.prototype.getDateRangeText = function () {\n    return this.parent.globalize.formatDate(this.parent.selectedDate, {\n      skeleton: 'y'\n    });\n  };\n\n  Year.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.onScrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.onDataReady, this);\n  };\n\n  Year.prototype.removeEventListener = function () {\n    this.parent.off(event.scrollUiUpdate, this.onScrollUiUpdate);\n    this.parent.off(event.dataReady, this.onDataReady);\n  };\n\n  Year.prototype.onDataReady = function (args) {\n    var yearEventModule = new YearEvent(this.parent);\n    yearEventModule.renderAppointments();\n    this.parent.notify('events-loaded', args);\n  };\n\n  Year.prototype.wireEvents = function (element, type) {\n    if (type === 'cell') {\n      if (this.parent.currentView !== 'TimelineYear') {\n        EventHandler.add(element, 'click', this.onCellClick, this);\n      } else {\n        EventHandler.add(element, 'click', this.workCellAction.cellClick, this.workCellAction);\n\n        if (!this.parent.isAdaptive) {\n          EventHandler.add(element, 'dblclick', this.workCellAction.cellDblClick, this.workCellAction);\n        }\n      }\n    } else {\n      EventHandler.add(element, 'scroll', this.onContentScroll, this);\n    }\n  };\n  /**\n   * Get module name.\n   */\n\n\n  Year.prototype.getModuleName = function () {\n    return 'year';\n  };\n  /**\n   * To destroy the year.\n   * @return {void}\n   * @private\n   */\n\n\n  Year.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.element) {\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      if (isBlazor()) {\n        this.parent.resetLayoutTemplates();\n        this.parent.resetEventTemplates();\n      }\n\n      remove(this.element);\n      this.element = null;\n    }\n  };\n\n  return Year;\n}(ViewBase);\n\nexport { Year };","map":{"version":3,"sources":["C:/Users/grigo/OneDrive/Рабочий стол/CRM/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/year.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","EventHandler","formatUnit","remove","createElement","addClass","closest","prepend","isBlazor","ViewBase","WorkCellInteraction","YearEvent","util","event","cls","Year","_super","parent","_this","call","viewClass","isInverseTableSelect","workCellAction","renderLayout","className","setPanel","TABLE_WRAP_CLASS","viewTypeClass","activeViewOptions","orientation","element","renderPanel","calendarTable","createTableLayout","OUTER_TABLE_CLASS","appendChild","querySelector","setAttribute","calendarTBody","rowCount","getRowColumnCount","columnCount","renderHeader","renderContent","uiStateValues","isGroupAdaptive","generateColumnLevels","renderResourceMobileLayout","wireEvents","CONTENT_WRAP_CLASS","notify","contentReady","headerWrapper","content","tr","td","contentWrapper","cTr","cTd","calendarWrapper","monthCollection","apply","length","map","value","index","_i","monthCollection_1","month","currentMonth","Date","selectedDate","getFullYear","getDate","calendarElement","attrs","renderCalendarHeader","renderCalendarContent","currentDate","headerContent","innerHTML","getMonthName","trigger","renderCell","elementType","date","dateCollection","getMonthDates","contentTable","CONTENT_TABLE_CLASS","thead","currentWeek","getWeekFirstDate","firstDateOfMonth","firstDayOfWeek","i","WEEK_LENGTH","getDayNames","getDay","getTime","MS_PER_DAY","tbody","weekDates","splice","tr_1","showWeekNumber","weekNumber","getWeekNumber","slice","toString","weekDates_1","WORK_CELLS_CLASS","classList","getMonth","push","OTHERMONTH_CLASS","isCurrentDate","concat","createTableColGroup","count","colGroupEle","globalize","formatDate","format","dateFormat","calendar","getCalendarMode","capitalizeFirstWord","colLevels","level","getDateSlots","workDays","group","resources","resourceBase","generateResourceLevels","resourceLevel","lastResourceLevel","groupIndex","pop","renderDates","startHour","endHour","workHours","start","end","dateCol","type","HEADER_CELLS_CLASS","colSpan","parseDate","skeleton","startDate","endDate","addDays","resetTime","monthCount","year","months","maxCount","Math","max","onCellClick","e","target","getDateFromElement","filteredEvents","eventBase","filterEvents","moreEventArgs","quickPopup","moreEventClick","onContentScroll","getDatesHeaderElement","firstElementChild","scrollLeft","monthWrapper","MONTH_HEADER_WRAPPER","scrollTop","onScrollUiUpdate","args","height","offsetHeight","getHeaderBarHeight","DATE_HEADER_CONTAINER_CLASS","style","leftPanelElement","getScrollXIndent","isAdaptive","scrollBarWidth","getScrollBarWidth","offsetWidth","clientWidth","cssProperties","border","padding","getWeekLastDate","getEndDateFromStartDate","getNextPreviousDate","addYears","getDateRangeText","addEventListener","on","scrollUiUpdate","dataReady","onDataReady","removeEventListener","off","yearEventModule","renderAppointments","currentView","add","cellClick","cellDblClick","getModuleName","destroy","isDestroyed","resetLayoutTemplates","resetEventTemplates"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, formatUnit, remove, createElement, addClass, closest, prepend, isBlazor } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { WorkCellInteraction } from '../actions/work-cells';\nimport { YearEvent } from '../event-renderer/year';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * year view\n */\nvar Year = /** @class */ (function (_super) {\n    __extends(Year, _super);\n    /**\n     * Constructor for year view\n     */\n    function Year(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-year-view';\n        _this.isInverseTableSelect = false;\n        _this.workCellAction = new WorkCellInteraction(parent);\n        return _this;\n    }\n    Year.prototype.renderLayout = function (className) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n        addClass([this.element], [this.viewClass, viewTypeClass, className]);\n        this.renderPanel(className);\n        var calendarTable = this.createTableLayout(cls.OUTER_TABLE_CLASS);\n        this.element.appendChild(calendarTable);\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        var calendarTBody = calendarTable.querySelector('tbody');\n        this.rowCount = this.getRowColumnCount('row');\n        this.columnCount = this.getRowColumnCount('column');\n        this.renderHeader(calendarTBody);\n        this.renderContent(calendarTBody);\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            this.generateColumnLevels();\n            this.renderResourceMobileLayout();\n        }\n        this.wireEvents(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), 'scroll');\n        this.parent.notify(event.contentReady, {});\n    };\n    // tslint:disable-next-line:no-empty\n    Year.prototype.renderHeader = function (headerWrapper) {\n    };\n    Year.prototype.renderContent = function (content) {\n        var tr = createElement('tr');\n        content.appendChild(tr);\n        var td = createElement('td');\n        tr.appendChild(td);\n        this.element.querySelector('tbody').appendChild(tr);\n        var contentWrapper = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        td.appendChild(contentWrapper);\n        var calendarTable = this.createTableLayout('e-calendar-table');\n        contentWrapper.appendChild(calendarTable);\n        var cTr = createElement('tr');\n        calendarTable.querySelector('tbody').appendChild(cTr);\n        var cTd = createElement('td');\n        cTr.appendChild(cTd);\n        var calendarWrapper = createElement('div', { className: 'e-calendar-wrapper' });\n        cTd.appendChild(calendarWrapper);\n        var monthCollection = Array.apply(null, { length: 12 }).map(function (value, index) { return index; });\n        for (var _i = 0, monthCollection_1 = monthCollection; _i < monthCollection_1.length; _i++) {\n            var month = monthCollection_1[_i];\n            var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, this.parent.selectedDate.getDate());\n            var calendarElement = createElement('div', {\n                className: 'e-month-calendar e-calendar',\n                attrs: { 'data-role': 'calendar' }\n            });\n            calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n            calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n            calendarWrapper.appendChild(calendarElement);\n        }\n    };\n    Year.prototype.renderCalendarHeader = function (currentDate) {\n        var headerWrapper = createElement('div', { className: 'e-header e-month' });\n        var headerContent = createElement('div', { className: 'e-day e-title', innerHTML: this.getMonthName(currentDate) });\n        headerWrapper.appendChild(headerContent);\n        this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: headerContent, date: currentDate });\n        return headerWrapper;\n    };\n    Year.prototype.renderCalendarContent = function (currentDate) {\n        var dateCollection = this.getMonthDates(currentDate);\n        var contentWrapper = createElement('div', { className: 'e-content e-month' });\n        var contentTable = this.createTableLayout('e-calendar-table ' + cls.CONTENT_TABLE_CLASS);\n        contentWrapper.appendChild(contentTable);\n        var thead = createElement('thead', { className: 'e-week-header' });\n        var tr = createElement('tr');\n        var currentWeek = util.getWeekFirstDate(util.firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n        for (var i = 0; i < util.WEEK_LENGTH; i++) {\n            tr.appendChild(createElement('th', { innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()] }));\n            currentWeek = new Date(currentWeek.getTime() + util.MS_PER_DAY);\n        }\n        thead.appendChild(tr);\n        prepend([thead], contentTable);\n        var tbody = contentTable.querySelector('tbody');\n        while (dateCollection.length > 0) {\n            var weekDates = dateCollection.splice(0, util.WEEK_LENGTH);\n            var tr_1 = createElement('tr', { attrs: { 'role': 'row' } });\n            if (this.parent.activeViewOptions.showWeekNumber) {\n                var weekNumber = util.getWeekNumber(weekDates.slice(-1)[0]);\n                var td = createElement('td', {\n                    className: 'e-week-number',\n                    attrs: { 'role': 'gridcell', 'title': 'Week ' + weekNumber },\n                    innerHTML: weekNumber.toString()\n                });\n                tr_1.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'weekNumberCells', element: td });\n            }\n            for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n                var date = weekDates_1[_i];\n                var td = createElement('td', {\n                    className: 'e-cell ' + cls.WORK_CELLS_CLASS,\n                    attrs: { 'role': 'gridcell', 'aria-selected': 'false', 'data-date': date.getTime().toString() }\n                });\n                td.appendChild(createElement('span', { className: 'e-day', innerHTML: date.getDate().toString() }));\n                var classList = [];\n                if (currentDate.getMonth() !== date.getMonth()) {\n                    classList.push(cls.OTHERMONTH_CLASS);\n                }\n                if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n                    classList = classList.concat(['e-today', 'e-selected']);\n                }\n                if (classList.length > 0) {\n                    addClass([td], classList);\n                }\n                tr_1.appendChild(td);\n                this.wireEvents(td, 'cell');\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n            tbody.appendChild(tr_1);\n        }\n        return contentWrapper;\n    };\n    Year.prototype.createTableColGroup = function (count) {\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < count; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        return colGroupEle;\n    };\n    Year.prototype.getMonthName = function (date) {\n        var month = this.parent.globalize.formatDate(date, {\n            format: this.parent.activeViewOptions.dateFormat || 'MMMM',\n            calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(month, 'multiple');\n    };\n    Year.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        colLevels.pop();\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n        if (startHour === void 0) { startHour = this.parent.workHours.start; }\n        if (endHour === void 0) { endHour = this.parent.workHours.end; }\n        var dateCol = [{\n                date: renderDates[0], type: 'dateHeader', className: [cls.HEADER_CELLS_CLASS], colSpan: 1, workDays: workDays,\n                startHour: new Date(+this.parent.globalize.parseDate(startHour, { skeleton: 'Hm' })),\n                endHour: new Date(+this.parent.globalize.parseDate(endHour, { skeleton: 'Hm' }))\n            }];\n        return dateCol;\n    };\n    Year.prototype.getMonthDates = function (date) {\n        var startDate = util.getWeekFirstDate(util.firstDateOfMonth(date), this.parent.firstDayOfWeek);\n        var endDate = util.addDays(new Date(+startDate), (6 * util.WEEK_LENGTH));\n        var dateCollection = [];\n        for (var start = startDate.getTime(); start < endDate.getTime(); start = start + util.MS_PER_DAY) {\n            dateCollection.push(util.resetTime(new Date(start)));\n        }\n        return dateCollection;\n    };\n    Year.prototype.getRowColumnCount = function (type) {\n        var monthCount = 12;\n        var year = this.parent.selectedDate.getFullYear();\n        var months = [];\n        for (var month = 0; month < monthCount; month++) {\n            months.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n        var maxCount = Math.max.apply(Math, months);\n        var count;\n        if (type === 'row') {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? monthCount : maxCount;\n        }\n        else {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : monthCount;\n        }\n        return count;\n    };\n    Year.prototype.isCurrentDate = function (date) {\n        return util.resetTime(new Date()).getTime() === util.resetTime(new Date(date.getTime())).getTime();\n    };\n    Year.prototype.onCellClick = function (e) {\n        var target = closest(e.target, '.' + cls.WORK_CELLS_CLASS);\n        var startDate = this.parent.getDateFromElement(target);\n        var endDate = util.addDays(new Date(startDate.getTime()), 1);\n        var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n        var moreEventArgs = { date: startDate, event: filteredEvents, element: e.target };\n        this.parent.quickPopup.moreEventClick(moreEventArgs, new Date());\n    };\n    Year.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var headerWrapper = this.getDatesHeaderElement();\n        if (headerWrapper) {\n            headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n        }\n        var monthWrapper = this.element.querySelector('.' + cls.MONTH_HEADER_WRAPPER);\n        if (monthWrapper) {\n            monthWrapper.scrollTop = target.scrollTop;\n        }\n    };\n    Year.prototype.onScrollUiUpdate = function (args) {\n        var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n        var headerWrapper = this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n        if (headerWrapper) {\n            height -= headerWrapper.offsetHeight;\n        }\n        var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentWrapper) {\n            contentWrapper.style.height = formatUnit(height);\n        }\n        var leftPanelElement = this.element.querySelector('.' + cls.MONTH_HEADER_WRAPPER);\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(contentWrapper));\n        }\n        if (!this.parent.isAdaptive && headerWrapper) {\n            var scrollBarWidth = util.getScrollBarWidth();\n            // tslint:disable:no-any\n            if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n                headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n            }\n            else {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n                headerWrapper.style[args.cssProperties.padding] = '';\n            }\n            // tslint:enable:no-any\n        }\n    };\n    Year.prototype.startDate = function () {\n        var startDate = new Date(this.parent.selectedDate.getFullYear(), 0, 1);\n        return util.getWeekFirstDate(startDate, this.parent.firstDayOfWeek);\n    };\n    Year.prototype.endDate = function () {\n        var endDate = new Date(this.parent.selectedDate.getFullYear(), 11, 31);\n        return util.addDays(util.getWeekLastDate(endDate, this.parent.firstDayOfWeek), 1);\n    };\n    Year.prototype.getEndDateFromStartDate = function (start) {\n        return util.addDays(new Date(start.getTime()), 1);\n    };\n    Year.prototype.getNextPreviousDate = function (type) {\n        return util.addYears(this.parent.selectedDate, ((type === 'next') ? 1 : -1));\n    };\n    Year.prototype.getDateRangeText = function () {\n        return this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'y' });\n    };\n    Year.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n    };\n    Year.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.onScrollUiUpdate);\n        this.parent.off(event.dataReady, this.onDataReady);\n    };\n    Year.prototype.onDataReady = function (args) {\n        var yearEventModule = new YearEvent(this.parent);\n        yearEventModule.renderAppointments();\n        this.parent.notify('events-loaded', args);\n    };\n    Year.prototype.wireEvents = function (element, type) {\n        if (type === 'cell') {\n            if (this.parent.currentView !== 'TimelineYear') {\n                EventHandler.add(element, 'click', this.onCellClick, this);\n            }\n            else {\n                EventHandler.add(element, 'click', this.workCellAction.cellClick, this.workCellAction);\n                if (!this.parent.isAdaptive) {\n                    EventHandler.add(element, 'dblclick', this.workCellAction.cellDblClick, this.workCellAction);\n                }\n            }\n        }\n        else {\n            EventHandler.add(element, 'scroll', this.onContentScroll, this);\n        }\n    };\n    /**\n     * Get module name.\n     */\n    Year.prototype.getModuleName = function () {\n        return 'year';\n    };\n    /**\n     * To destroy the year.\n     * @return {void}\n     * @private\n     */\n    Year.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (isBlazor()) {\n                this.parent.resetLayoutTemplates();\n                this.parent.resetEventTemplates();\n            }\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return Year;\n}(ViewBase));\nexport { Year };\n"]},"metadata":{},"sourceType":"module"}