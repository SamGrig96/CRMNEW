{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\grigo\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\CRM\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\grigo\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\CRM\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\grigo\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\CRM\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\grigo\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\CRM\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\grigo\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\CRM\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Redirect,withRouter}from\"react-router-dom\";import Main from\"./components/main/Main\";import Login from\"./components/login/Login\";import Authenticating from\"./components/authenticating/Authenticating\";import'react-perfect-scrollbar/dist/css/styles.css';import{signOut,signIn,checkSignInStatus}from\"./api/authentication\";import{mountScripts}from\"./api/scripts\";import{SIGNED_OUT,SIGNED_IN,AUTH_SUCCESS,AUTH_FAIL,AUTH_IN_PROGRESS}from\"./constants\";export var AppContainer=/*#__PURE__*/function(_Component){_inherits(AppContainer,_Component);var _super=_createSuper(AppContainer);function AppContainer(props){var _this;_classCallCheck(this,AppContainer);_this=_super.call(this,props);_this.state={signInStatus:SIGNED_OUT,googleUser:undefined};_this.init=_this.init.bind(_assertThisInitialized(_this));_this.initClient=_this.initClient.bind(_assertThisInitialized(_this));_this.onSignout=_this.onSignout.bind(_assertThisInitialized(_this));_this.onSignInSuccess=_this.onSignInSuccess.bind(_assertThisInitialized(_this));_this.onSignIn=_this.onSignIn.bind(_assertThisInitialized(_this));return _this;}_createClass(AppContainer,[{key:\"componentDidMount\",value:function componentDidMount(){mountScripts().then(this.init);}},{key:\"init\",value:function init(){window.gapi.load(\"client:auth2\",this.initClient);// let mygapi=JSON.stringify(gapi)\n// console.log(mygapi,\"json\")\n}},{key:\"initClient\",value:function initClient(){var _this2=this;checkSignInStatus().then(this.onSignInSuccess).catch(function(_){_this2.setState({signInStatus:AUTH_FAIL});});}},{key:\"onSignout\",value:function onSignout(){this.props.signOut();}},{key:\"onSignIn\",value:function onSignIn(){signIn().then(this.onSignInSuccess);}},{key:\"onSignInSuccess\",value:function onSignInSuccess(googleUser){this.setState({signInStatus:AUTH_SUCCESS,googleUser:googleUser});}},{key:\"renderView\",value:function renderView(){var signInStatus=this.state.signInStatus;if(signInStatus===AUTH_SUCCESS){return/*#__PURE__*/React.createElement(Main,{googleUser:this.state.googleUser});}else if(signInStatus===AUTH_IN_PROGRESS){return/*#__PURE__*/React.createElement(Authenticating,null);}else{return/*#__PURE__*/React.createElement(Login,{onSignIn:this.onSignIn});}// return(    <div>false url</div>)\n}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,this.props.location.pathname===\"/\"?/*#__PURE__*/React.createElement(Redirect,{to:\"/inbox\"}):this.renderView());}}]);return AppContainer;}(Component);export default withRouter(AppContainer);","map":{"version":3,"sources":["C:/Users/grigo/OneDrive/Рабочий стол/CRM/src/AppContainer.jsx"],"names":["React","Component","Redirect","withRouter","Main","Login","Authenticating","signOut","signIn","checkSignInStatus","mountScripts","SIGNED_OUT","SIGNED_IN","AUTH_SUCCESS","AUTH_FAIL","AUTH_IN_PROGRESS","AppContainer","props","state","signInStatus","googleUser","undefined","init","bind","initClient","onSignout","onSignInSuccess","onSignIn","then","window","gapi","load","catch","_","setState","location","pathname","renderView"],"mappings":"gmCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,CAAmBC,UAAnB,KAAqC,kBAArC,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,0BAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,4CAA3B,CACA,MAAO,6CAAP,CAEA,OAASC,OAAT,CAAkBC,MAAlB,CAA0BC,iBAA1B,KAAmD,sBAAnD,CACA,OAASC,YAAT,KAA6B,eAA7B,CAEA,OACEC,UADF,CAEEC,SAFF,CAGEC,YAHF,CAIEC,SAJF,CAKEC,gBALF,KAMO,aANP,CAQA,UAAaC,CAAAA,YAAb,4GAEE,sBAAYC,KAAZ,CAAmB,8CACjB,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CACXC,YAAY,CAAER,UADH,CAEXS,UAAU,CAAEC,SAFD,CAAb,CAKA,MAAKC,IAAL,CAAY,MAAKA,IAAL,CAAUC,IAAV,+BAAZ,CACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBD,IAAhB,+BAAlB,CACA,MAAKE,SAAL,CAAiB,MAAKA,SAAL,CAAeF,IAAf,+BAAjB,CACA,MAAKG,eAAL,CAAuB,MAAKA,eAAL,CAAqBH,IAArB,+BAAvB,CACA,MAAKI,QAAL,CAAgB,MAAKA,QAAL,CAAcJ,IAAd,+BAAhB,CAZiB,aAalB,CAfH,sFAiBsB,CAClBb,YAAY,GAAGkB,IAAf,CAAoB,KAAKN,IAAzB,EACD,CAnBH,mCAqBS,CACLO,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiB,cAAjB,CAAiC,KAAKP,UAAtC,EACA;AACA;AACD,CAzBH,+CA2Be,iBACXf,iBAAiB,GAChBmB,IADD,CACM,KAAKF,eADX,EAECM,KAFD,CAEO,SAAAC,CAAC,CAAI,CACV,MAAI,CAACC,QAAL,CAAc,CACZf,YAAY,CAAEL,SADF,CAAd,EAGD,CAND,EAOD,CAnCH,6CAqCc,CACV,KAAKG,KAAL,CAAWV,OAAX,GACD,CAvCH,2CAyCa,CACTC,MAAM,GAAGoB,IAAT,CAAc,KAAKF,eAAnB,EACD,CA3CH,wDA6CkBN,UA7ClB,CA6C8B,CAC1B,KAAKc,QAAL,CAAc,CACZf,YAAY,CAAEN,YADF,CAEZO,UAAU,CAAVA,UAFY,CAAd,EAID,CAlDH,+CAoDe,IAEHD,CAAAA,YAFG,CAEc,KAAKD,KAFnB,CAEHC,YAFG,CAIX,GAAIA,YAAY,GAAKN,YAArB,CAAmC,CACjC,mBAAO,oBAAC,IAAD,EAAM,UAAU,CAAE,KAAKK,KAAL,CAAWE,UAA7B,EAAP,CACD,CAFD,IAEO,IAAID,YAAY,GAAKJ,gBAArB,CAAuC,CAC5C,mBAAO,oBAAC,cAAD,MAAP,CACD,CAFM,IAEA,CACL,mBAAO,oBAAC,KAAD,EAAO,QAAQ,CAAE,KAAKY,QAAtB,EAAP,CAED,CACD;AACD,CAjEH,uCAmEW,CACP,mBACE,oBAAC,KAAD,CAAO,QAAP,MACG,KAAKV,KAAL,CAAWkB,QAAX,CAAoBC,QAApB,GAAiC,GAAjC,cACC,oBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EADD,CAGC,KAAKC,UAAL,EAJJ,CADF,CAUD,CA9EH,0BAAkCpC,SAAlC,EAiFA,cAAeE,CAAAA,UAAU,CAACa,YAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect, withRouter } from \"react-router-dom\";\r\nimport Main from \"./components/main/Main\";\r\nimport Login from \"./components/login/Login\";\r\nimport Authenticating from \"./components/authenticating/Authenticating\";\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\n\r\nimport { signOut, signIn, checkSignInStatus } from \"./api/authentication\";\r\nimport { mountScripts } from \"./api/scripts\";\r\n\r\nimport {\r\n  SIGNED_OUT,\r\n  SIGNED_IN,\r\n  AUTH_SUCCESS,\r\n  AUTH_FAIL,\r\n  AUTH_IN_PROGRESS\r\n} from \"./constants\";\r\n\r\nexport class AppContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      signInStatus: SIGNED_OUT,\r\n      googleUser: undefined\r\n    }\r\n\r\n    this.init = this.init.bind(this);\r\n    this.initClient = this.initClient.bind(this);\r\n    this.onSignout = this.onSignout.bind(this);\r\n    this.onSignInSuccess = this.onSignInSuccess.bind(this);\r\n    this.onSignIn = this.onSignIn.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    mountScripts().then(this.init);\r\n  }\r\n\r\n  init() {\r\n    window.gapi.load(\"client:auth2\", this.initClient);\r\n    // let mygapi=JSON.stringify(gapi)\r\n    // console.log(mygapi,\"json\")\r\n  }\r\n\r\n  initClient() {\r\n    checkSignInStatus()\r\n    .then(this.onSignInSuccess)\r\n    .catch(_ => {\r\n      this.setState({\r\n        signInStatus: AUTH_FAIL\r\n      })\r\n    });\r\n  }\r\n\r\n  onSignout() {\r\n    this.props.signOut();\r\n  }\r\n\r\n  onSignIn() {\r\n    signIn().then(this.onSignInSuccess);\r\n  }\r\n\r\n  onSignInSuccess(googleUser) {\r\n    this.setState({\r\n      signInStatus: AUTH_SUCCESS,\r\n      googleUser\r\n    });\r\n  }\r\n\r\n  renderView() {\r\n\r\n    const { signInStatus } = this.state;\r\n\r\n    if (signInStatus === AUTH_SUCCESS) {\r\n      return <Main googleUser={this.state.googleUser} />;\r\n    } else if (signInStatus === AUTH_IN_PROGRESS) {\r\n      return <Authenticating />;\r\n    } else {\r\n      return <Login onSignIn={this.onSignIn} />;\r\n\r\n    }\r\n    // return(    <div>false url</div>)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.props.location.pathname === \"/\" ? (\r\n          <Redirect to=\"/inbox\" />\r\n        ) : (\r\n          this.renderView()\r\n        )}\r\n      </React.Fragment>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(AppContainer);\r\n"]},"metadata":{},"sourceType":"module"}